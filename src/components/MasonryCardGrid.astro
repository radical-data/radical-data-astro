---
import Card from "@components/Card.astro";
import RadicalDataInBarcelona from "@assets/images/radical-data-in-barcelona.png";
import GlacierKwong from "@assets/images/glacier-kwong.png";
import SillyWalks from "@assets/images/silly-walks.png";
import QueeringTheMap from "@assets/images/queering-the-map.jpg";
import QueeringTheQuantifiedSelf from "@assets/images/queering-the-quantified-self.png";
import SecurityVision from "@assets/images/security-vision.png";
const archiveProjects = await Astro.glob("../pages/archive/*.md");
---

<script
  type="text/javascript"
  is:inline
  src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"
></script>
<script
  type="text/javascript"
  is:inline
  src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"
></script>

<div class="grid">
  <div class="grid-sizer"></div>
  <div class="gutter-sizer"></div>
  <div class="grid-item">
    <Card
      href="/about"
      title="Who we are"
      body="Radical Data is a collective using data and building tools for resistance and alternative futures."
      type="information"
      imgLink={RadicalDataInBarcelona}
      imgAltText="The cofounders of Radical Data on the roof of their studio in Barcelona."
    />
  </div>
  <div class="grid-item">
    <Card
      href="/"
      pretitle="Interview:"
      title="Glacier Kwong"
      body="Three years on, how the Hong Kong protests changed tech resistance."
      type="article"
      imgLink={GlacierKwong}
      imgAltText="A portrait photo of Glacier Kwong, a political activist from Hong Kong."
    />
  </div>
  <div class="grid-item">
    <Card
      href="/"
      title="Silly Walks"
      posttitle="(against Surveillance Capitalism)"
      body="A playful and functional resistance to gait detection AIs."
      type="project"
      imgLink={SillyWalks}
      imgAltText="A person walking in an unusual way with an AI-generated body pose mapped to their body."
    />
  </div>
  <div class="grid-item">
    <Card
      href="/"
      pretitle="From the archive:"
      title="Queering the Map"
      body="A community-generated map of queer experience."
      type="archive"
      imgLink={QueeringTheMap}
      imgAltText="A screenshot of the 'Queering the Map' website. It shows a pink map with lots of black pins on it."
    />
  </div>
  <div class="grid-item">
    <Card
      href={archiveProjects[0].url}
      title={archiveProjects[0].frontmatter.title}
      body={archiveProjects[0].frontmatter.extract}
      type="project"
      imgLink={QueeringTheQuantifiedSelf}
      imgAltText="A notebook with diagrams in."
    />
  </div>
  <div class="grid-item">
    <Card
      href="/"
      title="Security Vision"
      body="In collaboration with Leiden University, Radical Data have been documenting and visualising the use of AI-based surveillance across the world."
      type="project"
      imgLink={SecurityVision}
      imgAltText="An abstract network, floating in space."
    />
  </div>
</div>
<script type="text/javascript" is:inline>
  var grid = document.querySelector(".grid");

  var msnry = new Masonry(grid, {
    itemSelector: ".grid-item",
    columnWidth: ".grid-sizer",
    gutter: ".gutter-sizer",
    percentPosition: true,
  });

  imagesLoaded(grid).on("progress", function () {
    msnry.layout();
    // hack
    setTimeout(function () {
      msnry.layout();
    }, 1000);
  });

  imagesLoaded(grid).on("always", function () {
    msnry.layout();
  });

  msnry.layout();
  setTimeout(function () {
    msnry.layout();
  }, 2000);
</script>
<style>
  * {
    box-sizing: border-box;
  }

  /* force scrollbar */
  html {
    overflow-y: scroll;
  }

  /* ---- grid ---- */

  /* clear fix */
  .grid:after {
    content: "";
    display: block;
    clear: both;
  }

  /* ---- .grid-item ---- */
  .grid-sizer,
  .grid-item {
    width: 100%;
  }

  .grid-item {
    margin-block-end: 5%;
  }

  .gutter-sizer {
    width: 0;
  }

  @media (min-width: 800px) {
    .grid-sizer,
    .grid-item {
      width: 48%;
    }

    .gutter-sizer {
      width: 4%;
    }
  }

  .grid-item {
    float: left;
  }

  .grid-item img {
    display: block;
    max-width: 100%;
  }
</style>
